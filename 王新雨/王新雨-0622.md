## 王新雨 0622 当日总结

## 1 学习内容

### git分支操作

#### 添加 SSH 关联授权

若想避免每次提交都要手动输入用户名和密码，可以在系统中创建 SSH 公私钥，并将公钥放到 GitHub 指定位置。如此操作即可生成 GitHub 账户对于当前系统中的 Git 授权。

终端执行 ssh-keygen 命令按几次回车生成公私钥:

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561212411794)

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561213136937)

使用SSH链接重新克隆仓库：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561213415679)

**只有使用这种 git 开头的地址克隆仓库，SSH 关联才会起作用。**

使用 SSH 的好处主要有两点：

   - 免密码推送，执行 git push 时不再需要输入用户名和密码了；
   - 提高数据传输速度。它不是必须的，比如在实验楼的课程中挑战环境是不可保存的，一次性的，这种环境就没有必要创建 SSH 了，因为相较好处来说，还是太麻烦了。

#### 为 Git 命令设置别名

设置别名的命令是 ```git config --global alias.[别名] [原命令]```，如果原命令中有选项，需要加引号。别名是自定义的，可以随意命名，设置后，原命令和别名具有同等作用。

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561214516032)

#### Git 分支管理

Git 作为分布式版本控制器最强大的功能：分支管理。

##### git fetch 刷新本地分支信息

命令``` git fetch```，它的作用是将远程仓库的分支信息拉取到本地仓库，注意，仅仅是更新了本地的远程分支信息，也就是执行 git branch -avv 命令时，查看到的 remotes 开头的行的分支信息。

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561214921757)

可以看到，本地分支 master 的版本号无变化，而远程分支已经更新。所以，fetch 命令的作用是刷新保存在本地仓库的远程分支信息，此命令需要联网。此时若想使本地 master 分支的提交版本为最新，可以执行 git pull 命令来拉取远程分支到本地，pull 是拉取远程仓库的数据到本地，需要联网，而由于前面执行过 git fetch 命令，所以也可以执行 git rebase origin/master 命令来实现 “使本地 master 分支基于远程仓库的 master 分支”，

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561214985924)

远程仓库 master 分支、本地仓库的 origin/master 分支、本地仓库的 master 分支已经一致。

##### 创建新的本地分支

分支在项目开发中作用重大，多人协作时尤其不可或缺。例如一个项目上线了 1.0 版本，研发部门需要开发 1.1、1.2 两个测试版，增加不同的新功能，测试版的代码显然不能在正式版所在的分支上，此时需要新的分支来存放不同版次的代码。

首先，克隆远程仓库到本地，进入仓库主目录，执行 git br 查看分支信息：

执行 git branch [分支名] 可以创建新的分支：

执行 git checkout [分支名] 切换分支，checkout 也是常用命令，先给它设置别名，然后切换分支：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216130846)

另一个常用的命令 git checkout -b [分支名] 创建分支并切换到新分支：
![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216209645)

假设我们要在当前分支 dev1 上开发一个新的功能，需要增加一个文件 new_func1，然后生成一个新的提交：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216522991)

##### 将新分支中的提交推送至远程仓库

执行 git push [主机名] [本地分支名]:[远程分支名] 即可将本地分支推送到远程仓库的分支中，通常冒号前后的分支名是相同的，如果是相同的，可以省略 :[远程分支名]，如果远程分支不存在，会自动创建：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216662542)

##### 本地分支跟踪远程分支

执行这个命令 git branch -u [主机名/远程分支名] [本地分支名] 将本地分支与远程分支关联，或者说使本地分支跟踪远程分支。如果是设置当前所在分支跟踪远程分支，最后一个参数本地分支名可以省略不写：

执行 git branch --unset-upstream [分支名] 即可撤销该分支对远程分支的跟踪，同样地，如果撤销当前所在的分支的跟踪，分支名可以省略不写：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216842331)

在推送的时候，加个 --set-upstream 或其简写 -u 选项即可在推送时就自动跟踪远程分支，现在切换到 dev 分支试一下这个命令：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561216949859)

##### 删除远程分支

删除远程分支，使用 git push [主机名] :[远程分支名] ，如果一次性删除多个，可以这样：git push [主机名] :[远程分支名] :[远程分支名] :[远程分支名] 。此命令的原理是将空分支推送到远程分支，结果自然就是远程分支被删除。另一个删除远程分支的命令：git push [主机名] --delete [远程分支名]。删除远程分支的命令可以在任意本地分支中执行。

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561217150075)

##### 本地分支的更名与删除

使用 git branch -D [分支名] 删除本地分支，同样地，此命令也可以一次删除多个，将需要删除的分支名罗列在命令后面即可。在此之前，先介绍一个极少用到的命令：给本地分支改名 git branch -m [原分支名] [新分支名] ，若修改当前所在分支的名字，原分支名可以省略不写：

需要注意的一点：当前所在的分支不能被删除。切换到 master 分支，然后执行 git branch -D ved dev1 命令：

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080331-20190622-1561217297274)


## 2 心得

今天再次学习了一下git的分支操作，包括创建分支、关联远程分支、撤销关联、删除分支等。

**明日计划**
Spring内容，并重点加强一下git以及GitHub操作。